<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trading Strategy Dashboard</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <h1>Trading Strategy Dashboard</h1>
            <div class="header-actions">
                <button class="btn btn-secondary" id="themeToggle" aria-label="Cambia tema">
                    üåô
                </button>
            </div>
        </div>
    </header>

    <!-- Main Dashboard -->
    <main class="dashboard-main">
        <!-- Strategy Configuration -->
        <section class="card strategy-section" data-section="strategy">
            <div class="card-header">
                <h2 class="card-title">Configurazione Strategia</h2>
            </div>
            <div class="card-content">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="initialBalance" class="form-label">Saldo Iniziale ($)</label>
                        <input type="number" id="initialBalance" class="form-control" value="10000" min="1000" step="1000">
                    </div>
                    <div class="form-group">
                        <label for="riskPerTrade" class="form-label">Risk per Trade (%)</label>
                        <input type="number" id="riskPerTrade" class="form-control" value="2" min="0.5" max="10" step="0.5">
                    </div>
                    <div class="form-group">
                        <label for="winRate" class="form-label">Win Rate (%)</label>
                        <input type="number" id="winRate" class="form-control" value="60" min="0" max="100" step="1">
                    </div>
                    <div class="form-group">
                        <label for="avgWin" class="form-label">Media Vincite (%)</label>
                        <input type="number" id="avgWin" class="form-control" value="3" min="0.1" step="0.1">
                    </div>
                    <div class="form-group">
                        <label for="avgLoss" class="form-label">Media Perdite (%)</label>
                        <input type="number" id="avgLoss" class="form-control" value="2" min="0.1" step="0.1">
                    </div>
                    <div class="form-group">
                        <label for="numTrades" class="form-label">Numero Trade</label>
                        <input type="number" id="numTrades" class="form-control" value="100" min="10" max="1000" step="10">
                    </div>
                </div>
                <div class="form-actions">
                    <button class="btn btn-primary" id="generateBtn">Genera Simulazione</button>
                    <button class="btn btn-secondary" id="monteCarloBtn">Simulazione Monte Carlo</button>
                </div>
            </div>
        </section>

        <!-- Risk Management -->
        <section class="card risk-section" data-section="risk">
            <div class="card-header">
                <h2 class="card-title">Risk Management</h2>
            </div>
            <div class="card-content">
                <div class="risk-indicators">
                    <div class="risk-indicator">
                        <div class="risk-icon">‚ö†Ô∏è</div>
                        <div class="risk-info">
                            <span class="risk-label">Max Drawdown Atteso</span>
                            <span class="risk-value" id="maxDrawdownRisk">-</span>
                        </div>
                    </div>
                    <div class="risk-indicator">
                        <div class="risk-icon">üìä</div>
                        <div class="risk-info">
                            <span class="risk-label">Sharpe Ratio</span>
                            <span class="risk-value" id="sharpeRatioRisk">-</span>
                        </div>
                    </div>
                    <div class="risk-indicator">
                        <div class="risk-icon">üí∞</div>
                        <div class="risk-info">
                            <span class="risk-label">Profit Factor</span>
                            <span class="risk-value" id="profitFactorRisk">-</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Key Metrics -->
        <section class="metrics-section" data-section="metrics">
            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-icon">üí∞</div>
                    <div class="metric-content">
                        <span class="metric-label">Saldo Finale</span>
                        <span class="metric-value" id="finalBalance">$0</span>
                        <span class="metric-change" id="finalBalanceChange">0%</span>
                    </div>
                </div>
                <div class="metric-card">
                    <div class="metric-icon">üìà</div>
                    <div class="metric-content">
                        <span class="metric-label">Profitto Totale</span>
                        <span class="metric-value" id="totalProfit">$0</span>
                        <span class="metric-change" id="totalProfitChange">0%</span>
                    </div>
                </div>
                <div class="metric-card">
                    <div class="metric-icon">üìâ</div>
                    <div class="metric-content">
                        <span class="metric-label">Max Drawdown</span>
                        <span class="metric-value" id="maxDrawdown">0%</span>
                        <span class="metric-change negative" id="maxDrawdownChange">0%</span>
                    </div>
                </div>
                <div class="metric-card">
                    <div class="metric-icon">üéØ</div>
                    <div class="metric-content">
                        <span class="metric-label">Win Rate Reale</span>
                        <span class="metric-value" id="actualWinRate">0%</span>
                        <span class="metric-change" id="winRateChange">0%</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Equity Chart -->
        <section class="card chart-section" data-section="chart">
            <div class="card-header">
                <h2 class="card-title">Curva Equity</h2>
                <div class="chart-controls">
                    <button class="btn btn-sm btn-outline" id="resetZoom">Reset Zoom</button>
                    <button class="btn btn-sm btn-outline" id="exportChart">Esporta</button>
                </div>
            </div>
            <div class="card-content">
                <div class="equity-chart-container">
                    <canvas id="equityChart"></canvas>
                </div>
            </div>
        </section>

        <!-- Statistics -->
        <section class="card stats-section" data-section="stats">
            <div class="card-header">
                <h2 class="card-title">Statistiche Dettagliate</h2>
            </div>
            <div class="card-content">
                <div class="stats-grid">
                    <div class="stat-item">
                        <span class="stat-label">Numero Trade Totali</span>
                        <span class="stat-value" id="totalTrades">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Trade Vincenti</span>
                        <span class="stat-value" id="winningTrades">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Trade Perdenti</span>
                        <span class="stat-value" id="losingTrades">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Profit Factor</span>
                        <span class="stat-value" id="profitFactor">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Sharpe Ratio</span>
                        <span class="stat-value" id="sharpeRatio">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Calmar Ratio</span>
                        <span class="stat-value" id="calmarRatio">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Maggiore Serie Vincente</span>
                        <span class="stat-value" id="maxWinStreak">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Maggiore Serie Perdente</span>
                        <span class="stat-value" id="maxLossStreak">0</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Comparison Table -->
        <section class="card comparison-section" data-section="comparison">
            <div class="card-header">
                <h2 class="card-title">Confronto Scenari</h2>
                <button class="btn btn-sm btn-primary" id="addScenario">Aggiungi Scenario</button>
            </div>
            <div class="card-content">
                <div class="table-container">
                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>Scenario</th>
                                <th>Win Rate</th>
                                <th>Risk/Trade</th>
                                <th>Avg Win</th>
                                <th>Avg Loss</th>
                                <th>Saldo Finale</th>
                                <th>Max Drawdown</th>
                                <th>Sharpe Ratio</th>
                                <th>Azioni</th>
                            </tr>
                        </thead>
                        <tbody id="scenarioTableBody">
                        </tbody>
                    </table>
                </div>
            </div>
        </section>
    </main>

    <script src="script.js"></script>
</body>
</html>
